(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,n){t.exports=n(29)},22:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(12),o=n.n(i),c=(n(22),n(15)),s=n(3),u=n.n(s),l=n(4),f=n(10),d=n(5),g=n(6),p=n(8),h=n(7),m=n(9),b=n(13),v=(n(26),n(27),n(14)),k=function(t){function e(t){var n;Object(d.a)(this,e),(n=Object(p.a)(this,Object(h.a)(e).call(this,t))).history=Object(v.a)(),n.pushHistory=function(){var t=new URLSearchParams(window.location.search);n.state.config_url!==t.get("config")&&(t.set("config",n.state.config_url),n.history.push("?".concat(t.toString())))},n.handleSubmit=function(t){t&&t.preventDefault(),n.state.config_url.length&&(n.pushHistory(),n.setState({loading:!0}),fetch(n.state.config_url).then(function(t){if(!t.ok)throw Error("".concat(t.status," - ").concat(t.statusText));return t.json()}).then(function(t){n.setState({projects:t.projects})}).catch(function(t){var e=t.toString();t instanceof TypeError&&(e="Cors Disabled"),console.error("Nonon",e,t),n.setState({projects:[]})}).finally(function(){n.setState({loading:!1})}))},n.triggerLink=function(){var t=Object(f.a)(u.a.mark(function t(e,r){var a,i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(l.a)(n.state.projects),t.next=3,n.getLinkStatus(e,r);case 3:i=t.sent,(a=n.updateText(e,r,i.text,a))[e].result=i.error?0:n.compareResults(a[e].staging,a[e].production),n.setState({projects:a});case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),n.triggerRowLinks=function(){var t=Object(f.a)(u.a.mark(function t(e){var r,a,i,o,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=Object(l.a)(n.state.projects))[e].disabled){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Promise.all([n.getLinkStatus(e,"staging"),n.getLinkStatus(e,"production")]);case 5:a=t.sent,i=Object(c.a)(a,2),o=i[0],s=i[1],r=n.updateText(e,"staging",o.text,r),(r=n.updateText(e,"production",s.text,r))[e].result=o.error||s.error?0:n.compareResults(o,s),n.setState({projects:r});case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n.updateText=function(t,e,n,r){return r[t][e].text=n,r},n.compareResults=function(t,e){return t.text===e.text?2:1},n.renderLink=function(t){var e=n.state.projects[t.index][t.column.id];return a.a.createElement("a",{onClick:function(e){e.preventDefault(),n.triggerLink(t.index,t.column.id)},href:e.url,rel:"noopener noreferrer",target:"_blank"},t.value)};var r=new URLSearchParams(window.location.search),i="default.json";return r.has("config")&&(i=r.get("config")),n.state={data:[],projects:[],config_url:i,loading:!1,default_config_url:"default.json"},n}return Object(m.a)(e,t),Object(g.a)(e,[{key:"getLinkStatus",value:function(t,e){var n=Object(l.a)(this.state.projects),r=n[t][e];return r.text="Loading...",this.setState({projects:n}),fetch(r.url).then(function(t){if(!t.ok)throw Error("".concat(t.status," - ").concat(t.statusText));return t.json()}).then(function(t){return{text:t.branch||t.version||t.status,error:!1}}).catch(function(t){var e=t.toString();return t instanceof TypeError&&(e="Cors Disabled"),{text:e,error:!0}})}},{key:"render",value:function(){var t=this;return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",{className:"spliced"},a.a.createElement("form",{onSubmit:this.handleSubmit,method:"GET"},a.a.createElement("label",{rel:"config"},"Configuration url:"),a.a.createElement("input",{onChange:function(e){return t.setState({config_url:e.target.value})},id:"config-url",name:"config",value:this.state.config_url}),a.a.createElement("button",{type:"submit"},"Load"))),a.a.createElement("div",{className:"spliced"},a.a.createElement("label",{rel:"config"},"Example:"),a.a.createElement("a",{href:this.state.default_config_url,rel:"noopener noreferrer",target:"_blank"},this.state.default_config_url))),a.a.createElement(b.a,{data:this.state.projects,loading:this.state.loading,defaultFilterMethod:function(t,e,n){var r=t.pivotId||t.id;return void 0===e[r]||String(e[r]).toUpperCase().indexOf(t.value.toUpperCase())>-1},getTrProps:function(t,e,n){var r="";if(e&&e.original&&void 0!==e.original.result)switch(e.original.result){case 0:r="row-offline";break;case 1:r="row-differ";break;case 2:r="row-online"}return{className:r}},getTdProps:function(t){return{style:{lineHeight:"1.7em"}}},columns:[{Header:"Name",accessor:"name",width:200,Cell:function(t){return t.original&&t.original.disabled?a.a.createElement("del",null,t.value):t.value}},{Header:function(){return a.a.createElement("button",{onClick:function(e){Object(l.a)(t.state.projects).map(function(e,n){return t.triggerRowLinks(n)})}},"call")},width:50,Cell:function(e){return e.original&&e.original.disabled?a.a.createElement("span",null):a.a.createElement("button",{onClick:function(){t.triggerRowLinks(e.index)}},"call")}},{Header:"Result",accessor:"result",width:66},{id:"staging",Header:"Staging",accessor:function(t){return t.staging.text||t.staging.url},Cell:this.renderLink},{id:"production",Header:"Production",accessor:function(t){return t.production.text||t.production.url},Cell:this.renderLink}],filterable:!0,minRows:5,defaultPageSize:50,pageSize:150,onFetchData:function(e,n){t.state.projects.length>0||t.handleSubmit()}}))}}]),e}(a.a.Component),j=(n(28),function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(p.a)(this,Object(h.a)(e).call(this,t))).state={visible:!0,opacity:1},n}return Object(m.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timer)}},{key:"setTimer",value:function(){var t=this;this._timer=null!=this._timer?clearTimeout(this._timer):null,this._timer=setTimeout(function(){t.setState({opacity:0}),t._timer=null,setTimeout(function(){t.setState({visible:!1})},1e3)},this.props.delay)}},{key:"render",value:function(){return this.state.visible?a.a.createElement("span",{id:"forkongithub",style:{opacity:this.state.opacity}},a.a.createElement("a",{href:"https://github.com/ateliedocodigo/api-updates/fork",rel:"noopener noreferrer",target:"_blank"},"Fork me on GitHub")):a.a.createElement("span",null)}}]),e}(a.a.Component));j.defaultProps={delay:1500};var w=function(){return a.a.createElement("div",null,a.a.createElement(k,null),a.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.a3c8eabb.chunk.js.map